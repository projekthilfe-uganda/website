dist: xenial
#language: go

sudo: false

#go:
#  - master

git:
  depth: 1

install:
  - wget https://github.com/gohugoio/hugo/releases/download/v0.54.0/hugo_0.54.0_Linux-64bit.deb
  - sudo dpkg -i hugo*.deb
#  - go get github.com/gohugoio/hugo    # consume time 70.85s

before_script:
  - rm -rf public 2> /dev/null

script:
  - hugo -e production
#  - echo "$CNAME_URL" > public/CNAME

deploy:
  provider: pages
  skip-cleanup: true
  keep-history: true
  verbose: true
  repo: projekthilfe-uganda/projekthilfe-uganda.github.io
  local-dir: public
  github-token: $GITHUB_TOKEN
  target_branch: master
  on:
    branch: master
